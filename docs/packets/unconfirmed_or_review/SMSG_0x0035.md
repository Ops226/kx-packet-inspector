# SMSG 0x0035 — Context Lookup + Enqueue Actions

Status: Confirmed (code-backed)

Dispatch Path:
- Dispatcher: FUN_14025DA50, case 0x35 (index = opcode − 0x2B)
- Schema: &DAT_142512EF0 → passed to FUN_140FD4D50 (typed arg builder)
- Handler code slice (addresses approximate): 0x14025E05A..0x14025E1F2

Behavior Summary:
- Parses tuple via FUN_140FD4D50(&DAT_142512EF0) → RBX.
- Retrieves global/connection context: ctx = *(longlong*)(FUN_1409A4490() + 0x1F0).
- Primary lookup: objA = FUN_1402584F0(ctx->1D0, RBX+0x0A, *(ushort**)(RBX+0x12)).
- Optional secondary lookup: objB = FUN_1402584F0(ctx->360, RBX+0x1A, *(ushort**)(RBX+0x22)).
- Applies gate/condition from tuple flags; when satisfied, enqueues actions:
  • FUN_140251650(&ctx->E8, &LAB_1402536E0, objA, tuple_fragment)
  • FUN_140251440(&ctx->E8, &LAB_1402536E8, objB, tuple_fragment_2)
- Minimal loops; mostly guarded lookups and queue inserts.

Key Instructions (evidence):
- tuple = FUN_140FD4D50(&DAT_142512EF0)
- ctx = *(longlong*)(FUN_1409A4490() + 0x1F0)
- objA = FUN_1402584F0(*(longlong*)(ctx + 0x1D0), (RBX + 0x0A), *(ushort**)(RBX + 0x12))
- objB = FUN_1402584F0(*(longlong*)(ctx + 0x360), (RBX + 0x1A), *(ushort**)(RBX + 0x22))
- if (flags) { FUN_140251650(&ctx->E8, &LAB_1402536E0, objA, ...); FUN_140251440(&ctx->E8, &LAB_1402536E8, objB, ...); }

Field Layout (inferred from handler offsets):
- +0x0A/+0x12: key pair for primary lookup (pointer + u16*)
- +0x1A/+0x22: key pair for secondary lookup
- Additional flag(s) earlier in the tuple drive the enqueue condition

Wire Structure (first-pass)

```cpp
#pragma pack(push, 1)

struct Smsg_0035_Tuple {
    // Scalars/flags leading the tuple (drive conditions)
    uint8_t   flags;            // representative; exact width via schema typecodes
    // Primary lookup keys
    uint8_t*  keyA_ptr;         // at +0x0A
    uint16_t* keyA_u16p;        // at +0x12
    // Secondary lookup keys
    uint8_t*  keyB_ptr;         // at +0x1A
    uint16_t* keyB_u16p;        // at +0x22
    // Additional payload used when enqueuing callbacks
    uint8_t   payload[];        // consumed by FUN_140251650/1440
};

#pragma pack(pop)
```

Notes:
- Typical “parse → two lookups → conditional queue” pattern. Exact scalar widths come from &DAT_142512EF0’s typecodes; converge with a few captures for names and optional fields.
