# CMSG_0x0014_CONTEXT_MENU_REQUEST

**Direction**: Client -> Server
**Status**: Confirmed (Schema-Driven, Live-Validated)

## Summary

This packet is sent by the client when the player requests a context menu on another agent, typically by right-clicking them. The packet sends a snapshot of the player's current state (position, etc.) to the server, likely for validation of subsequent actions taken from that menu.

## Construction Chain

This packet is generated by the unified "Player State Context" pipeline, the same one responsible for complex movement events.

1.  **Data Aggregation (`FUN_1410225DE`):** The master state aggregator function is called with parameters indicating a context menu request. It gathers the player's current position, rotation, and other state data.
2.  **Generic Builder Chain:** The aggregator calls down the standard chain of generic builders.
3.  **Serialization (`CMSG::BuildAndSendPacket`):** The final builder calls the main serialization engine, which uses the schema for opcode `0x0014` to build the packet.
4.  **Sending Mechanism (Buffered Stream):** The packet is written to the main `MsgSendContext` buffer and sent in a batch when `MsgConn::FlushPacketBuffer` is called.

## Schema Information

- **Opcode:** `0x0014`
- **Schema Address (Live):** `0x7FF6E0EA55A0`

## Packet Structure (Decoded from Schema)

The schema defines a complex 11-field structure, which accounts for the 24-byte size of the live packet once variable-length fields are serialized.

| Field # | Typecode | Data Type (Inferred) | Description |
|---|---|---|---|
| 1 | `0x01` | `short` | A subtype or sequence ID. |
| 2 | `0x04` | Compressed `int` | A timestamp or server tick. |
| 3 | `0x02` | `byte` | A flag or state byte. |
| 4 | `0x04` | Compressed `int` | An ID, possibly the target agent ID. |
| 5 | `0x14` | Small Buffer | A buffer with a 1-byte length prefix. |
| 6 | `0x06` | `int` or `float` | A 4-byte value. |
| 7 | `0x06` | `int` or `float` | A second 4-byte value. |
| 8 | `0x01` | `short` | An ID or state value. |
| 9 | `0x03` | `int` | An ID or state value. |
| 10| `0x04` | Compressed `int` | An ID or state value. |
| 11| `0x02` | `byte` | A flag or state byte. |

## Live Packet Sample (Size 24 bytes)
`18:41:44.665 [S] CMSG_UNKNOWN Op:0x0014 | Sz:24 | 14 00 9B 00 FA B9 0B 00 A5 90 81 80 08 02 59 10 00 00 00 00 1F 2F 15 C0`